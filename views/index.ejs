<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DONGHUA - API Documentation</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            background-image: radial-gradient(#e0f2fe 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Glassmorphism Effect */
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .nav-link {
            transition: all 0.2s ease;
        }
        .nav-link:hover {
            transform: translateX(4px);
        }

        .endpoint-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .endpoint-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(14, 165, 233, 0.15);
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            inset: 0;
            background: #f8fafc;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }
        .loader {
            border-top-color: #0284c7;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Toast Notification */
        #toast-container {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }
        .toast {
            background: #1e293b;
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            font-size: 0.9rem;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        .toast.success { border-left: 4px solid #10b981; }
        .toast.info { border-left: 4px solid #3b82f6; }

        /* Syntax Highlighting for Code */
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            position: relative;
        }
        .code-block::-webkit-scrollbar { height: 6px; }
        .code-block::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }

        /* Badges */
        .badge { display: inline-block; padding: 2px 8px; font-size: 0.7rem; border-radius: 999px; font-weight: 600; text-transform: uppercase; }
        .badge-get { background: #dbeafe; color: #1e40af; }
        .badge-search { background: #f3f4f6; color: #4b5563; }
    </style>
</head>

<body class="text-slate-700 antialiased">

    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="flex flex-col items-center justify-center min-h-screen">
            <div class="loader ease-linear w-16 h-16 border-4 border-t-slate-200 rounded-full"></div>
            <p class="mt-4 text-slate-500 font-medium animate-pulse">Memuat Dokumentasi API...</p>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <div class="flex flex-col min-h-screen">
        
        <!-- HEADER -->
        <header class="bg-white border-b border-slate-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between">
                <!-- Brand -->
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-sky-600 to-cyan-500 flex items-center justify-center text-white shadow-lg">
                        <i class="fa-solid fa-layer-group"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-slate-900 tracking-tight">DONGHUA <span class="text-sky-600">API</span></h1>
                        <p class="text-xs text-slate-500 font-medium">Anichin Scraper Documentation</p>
                    </div>
                </div>

                <!-- Search (Desktop) -->
                <div class="hidden md:flex relative w-96">
                    <div class="relative group">
                        <i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-sky-600"></i>
                        <input type="text" id="search-input" placeholder="Cari endpoint (contoh: genres, az)..." 
                            class="w-full bg-slate-50 border border-slate-200 text-slate-700 rounded-full py-2.5 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-sky-500/50 focus:bg-white transition-all shadow-sm">
                        <button class="absolute right-1 top-1/2 -translate-y-1/2 bg-sky-600 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-sky-500 transition-colors">
                            <span class="badge badge-search">KETIK</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <div class="flex flex-1 overflow-hidden relative">
            
            <!-- Sidebar (Navigation) -->
            <aside class="w-full md:w-72 lg:w-80 bg-white border-r border-slate-200 flex flex-col overflow-y-auto z-40 hidden md:flex">
                <div class="p-6 space-y-8">
                    <h2 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Layanan</h2>
                    
                    <div class="space-y-1" id="sidebar-nav">
                        <!-- Nav Items will be injected here by JS -->
                    </div>

                    <div class="mt-8 pt-8 border-t border-slate-200">
                        <a href="https://github.com" target="_blank" class="flex items-center gap-2 text-slate-400 hover:text-slate-600 transition-colors">
                            <i class="fa-brands fa-github text-xl"></i>
                            <span class="text-sm font-medium">Source Code</span>
                        </a>
                    </div>
                </div>
            </aside>

            <!-- Endpoint List (Center) -->
            <main class="flex-1 overflow-y-auto bg-slate-50/50 p-4 md:p-8 lg:p-12 relative" id="main-scroll">
                <div class="max-w-5xl mx-auto">
                    <div class="mb-8 flex items-center justify-between">
                        <h2 class="text-2xl font-bold text-slate-900" id="service-title">Ongoing</h2>
                        <span class="text-sm text-slate-500 bg-white px-3 py-1 rounded-full border border-slate-200 shadow-sm" id="total-count">0 Endpoints</span>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="endpoints-grid">
                        <!-- Endpoint Cards injected by JS -->
                    </div>
                </div>
            </main>

            <!-- Detail/Example Panel (Right) - Sticky on Desktop -->
            <aside class="w-full lg:w-[400px] glass-panel shadow-xl lg:fixed lg:h-full lg:top-0 lg:right-0 overflow-y-auto z-30 hidden lg:block" id="detail-panel">
                <div class="p-6 h-full flex flex-col">
                    
                    <div class="flex justify-between items-start mb-6 pb-4 border-b border-slate-200">
                        <h3 class="text-xl font-bold text-slate-900 flex items-center gap-2">
                            <i class="fa-solid fa-code text-sky-600"></i>
                            <span id="panel-title">Detail Endpoint</span>
                        </h3>
                        <button onclick="togglePanel()" class="lg:hidden text-slate-400 hover:text-slate-600">
                            <i class="fa-solid fa-xmark text-xl"></i>
                        </button>
                    </div>

                    <div class="flex-grow overflow-y-auto space-y-6">
                        <!-- Method & Path -->
                        <div class="space-y-3">
                            <label class="text-xs font-semibold text-slate-500 uppercase">HTTP Method</label>
                            <div class="flex items-center gap-2">
                                <span class="badge badge-get text-lg font-mono" id="panel-method">GET</span>
                                <span class="text-sm text-slate-600" id="panel-desc">Fetch Data</span>
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label class="text-xs font-semibold text-slate-500 uppercase">Endpoint Path</label>
                            <code class="block bg-slate-100 text-slate-800 px-3 py-2 rounded border border-slate-200 text-sm break-all" id="panel-path">
                                /example/path
                            </code>
                        </div>

                        <!-- Parameters (If any) -->
                        <div id="panel-params-container" class="space-y-3 hidden">
                            <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                                <h4 class="text-sm font-bold text-slate-900 mb-3 flex items-center gap-2">
                                    <i class="fa-solid fa-sliders text-sky-500"></i>
                                    Parameters
                                </h4>
                                <ul class="space-y-3 text-sm" id="panel-params-list">
                                    <!-- Params injected here -->
                                </ul>
                            </div>
                        </div>

                        <!-- Code Example -->
                        <div class="space-y-2">
                            <div class="flex justify-between items-end mb-1">
                                <label class="text-xs font-semibold text-slate-500 uppercase">CURL Example</label>
                                <button onclick="copyCode()" class="text-xs flex items-center gap-1 bg-white hover:bg-slate-100 text-slate-700 border border-slate-300 px-3 py-1.5 rounded transition-colors shadow-sm">
                                    <i class="fa-regular fa-copy"></i> Salin
                                </button>
                            </div>
                            <div class="relative group">
                                <pre class="code-block">
<code id="example-code">curl https://api.example.com/endpoint</code>
                                </pre>
                                <div class="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity"></div>
                            </div>
                        </div>

                        <!-- Info Box -->
                        <div class="bg-sky-50 border border-sky-100 rounded-lg p-4">
                            <h4 class="text-sky-800 font-bold text-sm mb-2">Catatan Penting</h4>
                            <ul class="text-xs text-sky-700 space-y-1 list-disc list-inside">
                                <li>Base URL API adalah <span class="font-mono bg-sky-100 px-1 rounded">http://localhost:2504</span> (default port).</li>
                                <li>Gunakan endpoint <code class="bg-white px-1 rounded">/search</code> jika Anda tidak menemukan anime yang dicari.</li>
                                <li>Daftar genre (<code class="bg-white px-1 rounded">/genres</code>) berisi slug yang bisa digunakan untuk filter di <code class="bg-white px-1 rounded">/list</code>.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Mobile Floating Button -->
            <button onclick="togglePanel()" class="lg:hidden fixed bottom-6 right-6 w-14 h-14 bg-sky-600 rounded-full shadow-2xl text-white flex items-center justify-center z-50 hover:scale-110 transition-transform">
                <i class="fa-solid fa-code text-xl"></i>
            </button>

        </div>
    </div>

    <script>
        // --- API CONFIGURATION ---
        const BASE_URL = window.location.origin || "http://localhost:2504";

        const API_DATA = {
            donghua: {
                name: "DONGHUA API",
                description: "Dokumentasi resmi Anichin Donghua Scraper API.",
                color: "from-sky-600 to-cyan-500",
                endpoints: [
                    {
                        id: "swiper",
                        title: "Swiper Slider",
                        desc: "Daftar slide banner utama halaman depan.",
                        method: "GET",
                        path: "/slide",
                        params: [],
                        example: `${BASE_URL}/slide`
                    },
                    {
                        id: "popular",
                        title: "Popular",
                        desc: "Daftar anime populer hari ini (Recommendasi).",
                        method: "GET",
                        path: "/popular",
                        params: [],
                        example: `${BASE_URL}/popular`
                    },
                    {
                        id: "latest",
                        title: "Latest Release",
                        desc: "Update terbaru dengan pagination halaman.",
                        method: "GET",
                        path: "/latest",
                        params: [
                            { name: "page", type: "number", desc: "Nomor halaman (Default: 1)" }
                        ],
                        example: `${BASE_URL}/latest?page=2`
                    },
                    {
                        id: "ongoing",
                        title: "Ongoing",
                        desc: "Daftar donghua yang sedang tayang (Ongoing).",
                        method: "GET",
                        path: "/ongoing",
                        params: [
                            { name: "page", type: "number", desc: "Nomor halaman" }
                        ],
                        example: `${BASE_URL}/ongoing?page=1`
                    },
                    {
                        id: "completed",
                        title: "Completed",
                        desc: "Daftar donghua yang sudah selesai tayang (Completed).",
                        method: "GET",
                        path: "/completed",
                        params: [
                            { name: "page", type: "number", desc: "Nomor halaman" }
                        ],
                        example: `${BASE_URL}/completed?page=1`
                    },
                    {
                        id: "detail",
                        title: "Detail Donghua",
                        desc: "Mengambil informasi lengkap (Sinopsis, Genre, Episode).",
                        method: "GET",
                        path: "/detail/:slug",
                        params: [
                            { name: "slug", type: "string", desc: "Slug URL donghua (contoh: soul-land)" }
                        ],
                        example: `${BASE_URL}/detail/soul-land`
                    },
                    {
                        id: "episode",
                        title: "Episode Player",
                        desc: "Mengambil link streaming dan download episode.",
                        method: "GET",
                        path: "/episode/:slug",
                        params: [
                            { name: "slug", type: "string", desc: "Slug episode" }
                        ],
                        example: `${BASE_URL}/episode/martial-master-episode-1`
                    },
                    {
                        id: "search",
                        title: "Search",
                        desc: "Mencari donghua berdasarkan kata kunci.",
                        method: "GET",
                        path: "/search",
                        params: [
                            { name: "q", type: "string", desc: "Kata kunci pencarian" },
                            { name: "page", type: "number", desc: "Halaman" }
                        ],
                        example: `${BASE_URL}/search?q=soul land&page=1`
                    },
                    {
                        id: "genres",
                        title: "Genres List",
                        desc: "Mengambil daftar semua genre (Action, Comedy, dll).",
                        method: "GET",
                        path: "/genres",
                        params: [],
                        example: `${BASE_URL}/genres`
                    },
                    {
                        id: "az",
                        title: "AZ List",
                        desc: "Melihat daftar huruf A-Z untuk navigasi abjad.",
                        method: "GET",
                        path: "/az",
                        params: [
                            { name: "letter", type: "string", desc: "Huruf abjad (a-z, default: a)" }
                        ],
                        example: `${BASE_URL}/az?letter=b`
                    },
                    {
                        id: "list",
                        title: "Advanced Filter",
                        desc: "Filter spesifik menggunakan Genre, Studio, Season, dll.",
                        method: "GET",
                        path: "/list",
                        params: [
                            { name: "genre", type: "string", desc: "Slug genre (bisa koma untuk multiple)" },
                            { name: "studio", type: "string", desc: "Slug studio" },
                            { name: "season", type: "string", desc: "Tahun atau Season" },
                            { name: "type", type: "string", desc: "Type (donghua, anime, dll)" },
                            { name: "status", type: "string", desc: "Status (ongoing, completed)" },
                            { name: "order", type: "string", desc: "Sorting (title, update, latest)" },
                            { name: "page", type: "number", desc: "Halaman" }
                        ],
                        example: `${BASE_URL}/list?genre=action&status=ongoing&type=donghua`
                    },
                    {
                        id: "year",
                        title: "Filter by Year",
                        desc: "Filter anime berdasarkan tahun rilis.",
                        method: "GET",
                        path: "/year/:year",
                        params: [
                            { name: "year", type: "number", desc: "Tahun rilis (contoh: 2024)" }
                        ],
                        example: `${BASE_URL}/year/2024`
                    },
                    {
                        id: "schedule",
                        title: "Schedule",
                        desc: "Jadwal tayang donghua per hari.",
                        method: "GET",
                        path: "/schedule",
                        params: [],
                        example: `${BASE_URL}/schedule`
                    }
                ]
            }
        };

        // --- STATE MANAGEMENT ---
        let currentCategory = "donghua";
        let currentEndpoints = API_DATA[currentCategory].endpoints;
        let filteredEndpoints = currentEndpoints;

        // --- DOM ELEMENTS ---
        const sidebarNav = document.getElementById('sidebar-nav');
        const endpointsGrid = document.getElementById('endpoints-grid');
        const serviceTitle = document.getElementById('service-title');
        const totalEl = document.getElementById('total-count');
        const searchInput = document.getElementById('search-input');
        const detailPanel = document.getElementById('detail-panel');
        
        const panelTitle = document.getElementById('panel-title');
        const panelMethod = document.getElementById('panel-method');
        const panelPath = document.getElementById('panel-path');
        const panelDesc = document.getElementById('panel-desc');
        const panelParamsContainer = document.getElementById('panel-params-container');
        const panelParamsList = document.getElementById('panel-params-list');
        const exampleCode = document.getElementById('example-code');

        // --- FUNCTIONS ---

        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <i class="fa-solid ${type === 'success' ? 'fa-check-circle' : 'fa-info-circle'}"></i>
                <span>${message}</span>
            `;
            container.appendChild(toast);

            // Trigger animation
            requestAnimationFrame(() => toast.classList.add("show"));

            // Remove after 3s
            setTimeout(() => {
                toast.classList.remove("show");
                setTimeout(() => toast.remove(), 400); // Wait for fade out
            }, 3000);
        }

        function renderSidebar() {
            // Only one category in this API for now
            const link = document.createElement('a');
            link.href = "#";
            link.className = "nav-link block px-4 py-3 rounded-xl bg-gradient-to-br from-sky-50 to-cyan-50 text-sky-700 border border-sky-200 shadow-sm font-semibold flex items-center justify-between group";
            
            link.innerHTML = `
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-lg bg-white flex items-center justify-center text-sky-600">
                        <i class="fa-solid fa-layer-group"></i>
                    </div>
                    <span>API Donghua</span>
                </div>
                <i class="fa-solid fa-chevron-right opacity-0 group-hover:opacity-100 transition-opacity"></i>
            `;
            
            sidebarNav.appendChild(link);
        }

        function renderEndpoints(endpoints) {
            endpointsGrid.innerHTML = "";
            
            if (endpoints.length === 0) {
                endpointsGrid.innerHTML = `
                    <div class="col-span-1 md:col-span-2 lg:col-span-3 text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300">
                        <i class="fa-solid fa-magnifying-glass text-4xl text-slate-300 mb-4"></i>
                        <h3 class="text-lg font-semibold text-slate-600">Tidak ditemukan</h3>
                        <p class="text-slate-400 text-sm">Coba kata kunci lain.</p>
                    </div>
                `;
                totalEl.textContent = "0 Endpoints";
                return;
            }

            totalEl.textContent = `${endpoints.length} Endpoint${endpoints.length > 1 ? 's' : ''}`;
            
            endpoints.forEach(ep => {
                const card = document.createElement('div');
                card.className = "endpoint-card bg-white p-6 rounded-xl border border-transparent hover:border-sky-300 shadow-sm cursor-pointer relative overflow-hidden";
                card.onclick = () => selectEndpoint(ep);
                
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="font-bold text-slate-900 text-lg">${ep.title}</h3>
                        <span class="badge badge-get">${ep.method}</span>
                    </div>
                    <p class="text-sm text-slate-600 leading-relaxed line-clamp-2">${ep.desc}</p>
                    <div class="mt-4 pt-4 border-t border-slate-100 flex items-center gap-2 text-xs font-mono text-slate-400">
                        <i class="fa-solid fa-link"></i>
                        ${ep.path}
                    </div>
                    <div class="absolute top-0 right-0 p-3 opacity-0 hover:opacity-100 transition-opacity">
                        <i class="fa-solid fa-arrow-right text-sky-400"></i>
                    </div>
                `;
                endpointsGrid.appendChild(card);
            });
        }

        function selectEndpoint(ep) {
            // Highlight selected card (Visual logic omitted for brevity, relies on render loop if implemented)
            
            panelTitle.textContent = ep.title;
            panelMethod.textContent = ep.method;
            panelDesc.textContent = ep.desc;
            panelPath.textContent = `${BASE_URL}${ep.path}`;
            
            // Generate CURL example
            let curl = `curl -X ${ep.method} "${BASE_URL}${ep.path}"`;
            
            // Render Params
            if (ep.params && ep.params.length > 0) {
                panelParamsContainer.classList.remove('hidden');
                let paramsHTML = ep.params.map(p => `
                    <li>
                        <span class="block font-semibold text-slate-700">${p.name}</span>
                        <span class="text-slate-400">(${p.type})</span>
                        <span class="block text-xs mt-0.5 text-slate-500">${p.desc}</span>
                    </li>
                `).join('');
                
                // Add params to curl
                const queryParams = ep.params
                    .filter(p => ep.path.includes(`:${p.name}`))
                    .map(p => `${p.name}=EXAMPLE`)
                    .join('&');
                
                if (queryParams.length > 0) {
                    curl = `curl -X ${ep.method} "${BASE_URL}${ep.path.replace(/:slug/, '')}?${queryParams}"`;
                }
                
                panelParamsList.innerHTML = paramsHTML;
            } else {
                panelParamsContainer.classList.add('hidden');
            }

            // Update Code
            exampleCode.textContent = curl;
            
            // Mobile UX: Open panel automatically
            if (window.innerWidth < 1024) {
                detailPanel.classList.remove('hidden');
                detailPanel.classList.add('fixed');
            }
        }

        function togglePanel() {
            detailPanel.classList.toggle('hidden');
            // Ensure mobile specific class logic
            if (window.innerWidth >= 1024) {
                // Desktop logic handled by css
            } else {
                // Mobile
                if (!detailPanel.classList.contains('hidden')) {
                    detailPanel.classList.add('fixed', 'inset-0');
                }
            }
        }

        function copyCode() {
            const code = exampleCode.textContent;
            navigator.clipboard.writeText(code).then(() => {
                showToast("Endpoint berhasil disalin!", "success");
            }).catch(() => {
                showToast("Gagal menyalin.", "info");
            });
        }

        // --- SEARCH LOGIC ---
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            
            if (!query) {
                filteredEndpoints = currentEndpoints;
            } else {
                filteredEndpoints = currentEndpoints.filter(ep => 
                    ep.title.toLowerCase().includes(query) || 
                    ep.path.toLowerCase().includes(query) ||
                    ep.desc.toLowerCase().includes(query)
                );
            }
            renderEndpoints(filteredEndpoints);
        });

        // --- INITIALIZATION ---
        window.onload = () => {
            renderSidebar();
            renderEndpoints(currentEndpoints);

            // Remove loading screen
            const loader = document.getElementById('loading-screen');
            loader.style.opacity = '0';
            setTimeout(() => {
                loader.style.display = 'none';
            }, 500);

            // Select first endpoint by default
            if (currentEndpoints.length > 0) {
                selectEndpoint(currentEndpoints[0]);
            }
        };
    </script>
</body>
</html>
